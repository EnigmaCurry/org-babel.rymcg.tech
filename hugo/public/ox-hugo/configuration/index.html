<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.30-DEV" />
    <meta name="description" content="">


    <title>Configuration :: rymcg.tech</title>
    <link rel="shortcut icon" href="/images/favicon.png" type="image/x-icon" />
    <link href="/css/nucleus.css" rel="stylesheet">
    <link href="/css/font-awesome.min.css" rel="stylesheet">
    <link href="/css/hybrid.css" rel="stylesheet">
    <link href="/css/featherlight.min.css" rel="stylesheet">
    <link href="/css/auto-complete.css" rel="stylesheet">
    
    <link href="/css/theme.css" rel="stylesheet">
    
    
      <link href="/css/theme-rymcg.css" rel="stylesheet">
    
    <link rel="stylesheet" href="/css/bootstrap.min.css">
    <script src="/js/jquery-2.x.min.js"></script>
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left {
        display:none !important;
      }
    </style>

    

    

  </head>
  <body class="" data-url="/ox-hugo/configuration/">
    <nav id="sidebar" class="showVisitedLinks"><div class="highlightable">
  <div id="header-wrapper">
    <div id="header"> 
	<p>rymcg.tech</p>
 


    </div><div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>
<script type="text/javascript" src="/js/lunr.min.js"></script>
<script type="text/javascript" src="/js/auto-complete.js"></script>
<script type="text/javascript">
    var baseurl = "https:\/\/blog.rymcg.tech\/";
</script>
<script type="text/javascript" src="/js/search.js"></script>

  </div>


    <ul class="topics">
    <li data-nav-id="/org-babel/" class="dd-item">
      <a href="/org-babel/">
        <span>Org-babel tests</span><i class="fa fa-circle-thin read-icon"></i>
      </a>
    </li>
    <li data-nav-id="/ox-hugo/" class="dd-item parent">
      <a href="/ox-hugo/">
        <span>Make your own website like this</span>
            <i class="fa fa-angle-down fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/ox-hugo/license/" class="dd-item">
        <a href="/ox-hugo/license/">
          <span>Licenses</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/ox-hugo/configuration/" class="dd-item active">
        <a href="/ox-hugo/configuration/">
          <span>Configuration</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/ox-hugo/creating-content/" class="dd-item">
        <a href="/ox-hugo/creating-content/">
          <span>Creating content</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/ox-hugo/review/" class="dd-item">
        <a href="/ox-hugo/review/">
          <span>Review</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/book1/" class="dd-item">
      <a href="/book1/">
        <span>Book</span><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
    <li data-nav-id="/book1/chapter1/" class="dd-item">
      <a href="/book1/chapter1/">
        <span>Chapter 1 Index</span><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/book1/chapter1/section1/" class="dd-item">
        <a href="/book1/chapter1/section1/">
          <span>sub section 1</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/book1/chapter1/section2/" class="dd-item">
        <a href="/book1/chapter1/section2/">
          <span>sub section 2</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
        </ul>
    </li>
    <li data-nav-id="/book1/chapter2/" class="dd-item">
      <a href="/book1/chapter2/">
        <span>Chapter 2 Index</span><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/book1/chapter2/section1/" class="dd-item">
        <a href="/book1/chapter2/section1/">
          <span>sub section 1</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/book1/chapter2/section2/" class="dd-item">
        <a href="/book1/chapter2/section2/">
          <span>sub section 2</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
        </ul>
    </li>
        </ul>
    </li>
    <li data-nav-id="/emacs/" class="dd-item">
      <a href="/emacs/">
        <span>Emacs</span><i class="fa fa-angle-right fa-lg category-icon"></i><i class="fa fa-circle-thin read-icon"></i>
      </a>
        <ul>
      <li data-nav-id="/emacs/def-advice/" class="dd-item">
        <a href="/emacs/def-advice/">
          <span>def-advice</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/emacs/emacs-post-2/" class="dd-item">
        <a href="/emacs/emacs-post-2/">
          <span>second emacs post</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/emacs/emacs-post-1/" class="dd-item">
        <a href="/emacs/emacs-post-1/">
          <span>first emacs post and a rather unfortunately long title that just goes on and on and on and on.</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
      <li data-nav-id="/emacs/elips-tips/" class="dd-item">
        <a href="/emacs/elips-tips/">
          <span>elisp tips</span><i class="fa fa-circle-thin read-icon"></i>
        </a>
    </li>
        </ul>
    </li>
    </ul>


    <section id="footer">
    </section>
  </div>
</nav>



        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
        
          <div id="top-bar">
            <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                <span id="sidebar-toggle-span">
                  <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                    <i class="fa fa-bars"></i>
                  </a>
                </span>
                <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                <span class="links">
                







 <a href='/'>Front Page</a> > <a href='/ox-hugo/'>Make your own website like this</a> > Configuration

 

 

   
                </span>
            </div>
            <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#environment">Environment</a>
<ul>
<li><a href="#your-local-git-checkout-where-you-have-blog-dot-org">Your local git checkout where you have blog.org:</a></li>
</ul></li>
<li><a href="#install-dev-version-of-hugo">Install dev version of hugo</a></li>
<li><a href="#install">Install</a></li>
<li><a href="#run">Run!</a></li>
<li><a href="#ox-hugo">ox-hugo</a></li>
<li><a href="#hugo-site-skeleton">Hugo site skeleton</a></li>
<li><a href="#code-block-headers">Code block headers</a></li>
<li><a href="#rss">RSS</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

          </div>
        
        
        <div id="body-inner">
          
            <h1>Configuration</h1>
            <div id="post-meta">

   

</div>

          

            





<h2 id="environment">Environment</h2>

<p><em><strong>You need to change these settings according to your own environment:</strong></em></p>

<p>Parts of this file will reference back to the following setting:</p>

<h3 id="your-local-git-checkout-where-you-have-blog-dot-org">Your local git checkout where you have blog.org:</h3>

<div class='block-header'>blog-org-src<br/></div>
<div class="highlight"><pre class="chroma"><code class="language-txt" data-lang="txt">~/git/rymcg.tech</code></pre></div>
<h2 id="install-dev-version-of-hugo">Install dev version of hugo</h2>

<p>Currently I use the latest devolpment version of hugo, because I&rsquo;m
waiting for recent bugfixes to make it into stable. Here is
<a href="https://gist.github.com/kaushalmodi/456b5ea26b3e869e5d63d4a67b85f676">kaushalmodi&rsquo;s script</a> with a few tweaks.</p>

<div class='block-header exec'>Run</div>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell"><span class="c1"># /home/kmodi/go.apps/src/github.com/gohugoio/hugo/README.md
</span><span class="c1"># http://matthewkwilliams.com/index.php/2014/09/28/go-executables-are-statically-linked-except-when-they-are-not/
</span><span class="c1"></span>
<span class="nv">here</span><span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>

<span class="nv">hugo_src</span><span class="o">=</span><span class="s2">&#34;github.com/gohugoio/hugo&#34;</span>
<span class="nv">chroma_src</span><span class="o">=</span><span class="s2">&#34;github.com/alecthomas/chroma&#34;</span>

<span class="nb">export</span> <span class="nv">GOPATH</span><span class="o">=</span>~/git/rymcg.tech/hugo/go
mkdir -p <span class="nv">$GOPATH</span>
<span class="nb">export</span> <span class="nv">CGO_ENABLED</span><span class="o">=</span><span class="m">0</span>
<span class="nb">export</span> <span class="nv">GO_EXTLINK_ENABLED</span><span class="o">=</span><span class="m">0</span>

<span class="c1"># https://discuss.gohugo.io/t/started-getting-failed-to-normalize-url-string-returning-in/5034/7?u=kaushalmodi
</span><span class="c1"># Do govendor sync to prevent issues like this: https://github.com/gohugoio/hugo/issues/2919
</span><span class="c1"></span><span class="k">if</span> ! <span class="nb">hash</span> govendor <span class="m">2</span>&gt;/dev/null
<span class="k">then</span>
    go get -u -v github.com/kardianos/govendor
<span class="k">fi</span>

<span class="c1"># Install hugo for the first time so that the ${GOPATH}/src/${hugo_src}
</span><span class="c1"># directory gets populated.
</span><span class="c1"></span><span class="k">if</span> <span class="o">[[</span> ! -d <span class="s2">&#34;</span><span class="si">${</span><span class="nv">GOPATH</span><span class="si">}</span><span class="s2">/src/</span><span class="si">${</span><span class="nv">hugo_src</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">]]</span> <span class="o">||</span> <span class="o">(</span> ! <span class="nb">hash</span> hugo <span class="m">2</span>&gt;/dev/null <span class="o">)</span>
<span class="k">then</span>
    go get -u -v <span class="si">${</span><span class="nv">hugo_src</span><span class="si">}</span>
<span class="k">fi</span>

<span class="c1"># Update to hugo master branch
</span><span class="c1"></span><span class="nb">cd</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">GOPATH</span><span class="si">}</span><span class="s2">/src/</span><span class="si">${</span><span class="nv">hugo_src</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">||</span> <span class="nb">exit</span>

git fetch --all <span class="c1"># fetch new branch names if any
</span><span class="c1"></span>git checkout master
<span class="c1"># git fetch --all
</span><span class="c1"># Force update the vendor file in case it got changed
</span><span class="c1"></span>git reset --hard origin/master

<span class="c1"># Synchronize all the dependent packages as per the just updated vendor file
</span><span class="c1"></span>govendor sync

<span class="c1"># Update dependent packages from their master branches
</span><span class="c1"># govendor fetch github.com/chaseadamsio/goorgeous
</span><span class="c1"># govendor fetch github.com/chaseadamsio/goorgeous@=fixNewlineParagraphs
</span><span class="c1"></span>
<span class="c1"># Tue Sep 26 11:28:47 EDT 2017 - kmodi
</span><span class="c1"># Turns out that the chroma package contains sub-packages too.. so have to
</span><span class="c1"># include all separately.
</span><span class="c1"># govendor fetch ${chroma_src}
</span><span class="c1"># govendor fetch ${chroma_src}/formatters
</span><span class="c1"># govendor fetch ${chroma_src}/formatters/html
</span><span class="c1"># govendor fetch ${chroma_src}/lexers
</span><span class="c1"># govendor fetch ${chroma_src}/styles
</span><span class="c1"></span>
<span class="c1"># https://discourse.gohugo.io/t/building-hugo-with-the-latest-version-of-chroma/8543/2?u=kaushalmodi
</span><span class="c1"></span>go get -u -v <span class="si">${</span><span class="nv">chroma_src</span><span class="si">}</span>/...
<span class="c1"># make vendor
</span><span class="c1"></span>rm -rf <span class="s2">&#34;</span><span class="si">${</span><span class="nv">GOPATH</span><span class="si">}</span><span class="s2">/src/</span><span class="si">${</span><span class="nv">hugo_src</span><span class="si">}</span><span class="s2">/vendor/</span><span class="si">${</span><span class="nv">chroma_src</span><span class="si">}</span><span class="s2">&#34;</span>

<span class="nv">hugo_commithash</span><span class="o">=</span><span class="k">$(</span>git rev-parse --short HEAD <span class="m">2</span>&gt;/dev/null<span class="k">)</span>
<span class="nv">chroma_commithash</span><span class="o">=</span><span class="k">$(</span><span class="nb">cd</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">GOPATH</span><span class="si">}</span><span class="s2">/src/</span><span class="si">${</span><span class="nv">chroma_src</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">&amp;&amp;</span> git rev-parse --short HEAD <span class="m">2</span>&gt;/dev/null<span class="k">)</span>
<span class="nv">builddate</span><span class="o">=</span><span class="k">$(</span>date +%FT%T%z<span class="k">)</span>

go install -v <span class="se">\
</span><span class="se"></span>   -ldflags <span class="s2">&#34;-X </span><span class="si">${</span><span class="nv">hugo_src</span><span class="si">}</span><span class="s2">/hugolib.CommitHash=</span><span class="si">${</span><span class="nv">hugo_commithash</span><span class="si">}</span><span class="s2">:chroma-</span><span class="si">${</span><span class="nv">chroma_commithash</span><span class="si">}</span><span class="s2"> \
</span><span class="s2">             -X </span><span class="si">${</span><span class="nv">hugo_src</span><span class="si">}</span><span class="s2">/hugolib.BuildDate=</span><span class="si">${</span><span class="nv">builddate</span><span class="si">}</span><span class="s2">&#34;</span> <span class="se">\
</span><span class="se"></span>   <span class="si">${</span><span class="nv">hugo_src</span><span class="si">}</span>

<span class="nb">cd</span> <span class="s2">&#34;</span><span class="si">${</span><span class="nv">here</span><span class="si">}</span><span class="s2">&#34;</span> <span class="o">||</span> exit</code></pre></div>
<h2 id="install">Install</h2>

<ul>
<li>Create a new git repository:</li>
</ul>

<div class='block-header exec'>Run</div>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">git init ~/git/rymcg.tech</code></pre></div>
<ul>
<li>Download <a href="https://raw.githubusercontent.com/EnigmaCurry/blog.rymcg.tech/master/blog.org">blog.org</a> saving it to the new repository you created.</li>
<li>Use this code in your Emacs init file:</li>
</ul>

<div class='block-header'>example-emacs-init<br/></div>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; Load blog.el which is tangled from blog.org:</span>
<span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">blog-init</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;~/git/rymcg.tech/emacs/blog.el&#34;</span><span class="p">)))</span>
  <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">file-exists-p</span> <span class="nv">blog-init</span><span class="p">)</span>
    <span class="p">(</span><span class="nv">load-file</span> <span class="nv">blog-init</span><span class="p">)))</span></code></pre></div>
<ul>
<li>(Don&rsquo;t worry, blog.el doesn&rsquo;t exist yet. See the next sections.)</li>
</ul>

<h2 id="run">Run!</h2>

<p>These are the <strong>manual</strong> steps for building the website, directly from
org-mode. I know, this looks <em>a bit tedious</em>, but this should make it
easier to conceptualize all the individual steps. Later on, we&rsquo;ll
build up a script to automate all of this.</p>

<ul>
<li>In Emacs, open up your copy of <code>blog.org</code>.

<ul>
<li>If you see a screen warning about local variables, hit <code>!</code> to
accept them.

<ul>
<li>(This sets up ox-hugo to automatically rebuild the dev site when
you save the file. See the hook at the very bottom of <code>blog.org</code>)</li>
</ul></li>
</ul></li>
<li>If you installed org-mode correctly, all should be true:

<ul>
<li>The file will open up in org-mode automatically, because it ends
in <code>.org</code>.</li>
<li>You should see <code>Org</code> in the modeline.</li>
<li><code>M-x org-version</code> should say something like 9.1 or higher.</li>
</ul></li>
<li>Change the <code>blog-org-src</code> parameter in the Configuration section to
where you made your git repository.</li>
<li>Modify the the config to your liking.</li>
<li>Save the file. It&rsquo;s yours now!</li>
<li>Tangle all the org-babel code blocks:

<ul>
<li>(Tangle is org-babel lingo for: <em>save all code blocks marked with <code>:tangle</code> to the
specified external file.</em>)</li>
<li>Type <code>C-c C-v t</code> (or <code>M-x org-babel-tangle</code>)</li>
<li>This creates <code>emacs/blog.el</code></li>
<li>This creates <code>blog</code>, the hugo <code>config.yml</code>
file, and a bunch of other files defined below.</li>
</ul></li>
<li><strong>Restart Emacs</strong> to reload the config.

<ul>
<li>Packages will automatically download from <a href="https://melpa.org/#/">MELPA</a> the first time
it&rsquo;s loaded, so be patient. Watch for any errors in the
<code>*Messages*</code> buffer.</li>
</ul></li>
</ul>

<p>Steps to run each time you want to publish <code>blog.org</code>:</p>

<ul>
<li>Save any changes to <code>blog.org</code></li>
<li>Run ox-hugo to export Org to markdown:

<ul>
<li>Type <code>C-c C-e H A</code> (or <code>C-1 M-x org-hugo-export-subtree-to-md</code>)</li>
</ul></li>
<li>Optionally re-tangle config files, <code>C-c C-v t</code>

<ul>
<li>(You only really have to run this when you change blocks that have a
<code>:tangle</code> parameter.)</li>
</ul></li>
<li>Run the embedded hugo server:

<ul>
<li>Type <code>M-x hugo-server-start</code>.</li>
<li>The site should automatically open in your browser.</li>
<li>If you have a <a href="http://livereload.com/extensions/">live reload extension</a> installed, the site should
refresh automatically when you make changes.</li>
<li>Configure <code>browse-url-browser-function</code> if it opens in the wrong
browser.</li>
<li>Sometimes the hugo server crashes, if it does, just run <code>M-x
    hugo-server-start</code> again.</li>
</ul></li>
<li>Before final publish, run hugo to translate the markdown to the public html:

<ul>
<li>Type <code>M-x eshell-command RET bash -c 'cd hugo; ./go/bin/hugo'</code></li>
<li>I was kidding, I don&rsquo;t type that.</li>
<li>I just open a terminal in the <code>hugo</code> directory and run
<code>./go/bin/hugo</code>.</li>
</ul></li>
<li>Transfer the <code>hugo/public</code> directory to your web host.</li>
</ul>

<p><strong>Phew!</strong></p>

<p>Now that you went through all that, and you understand it, you have
graduated to using the <strong>automated</strong> script (yay!) Read the next section, and
then just run <code>M-x blog-publish</code> from now on. It will create a new
<code>public</code> branch, where it will build and publish HTML to
<code>hugo/public</code>. The <code>public</code> branch is ephemeral, it gets blown away
and created from scratch each time you run <code>M-x blog-publish</code>. Keep
your <code>blog.org</code> in the <code>master</code> branch. Keeping the HTML in a seperate
branch, keeps commits clean. Hosts like <a href="https://www.netlify.com/">netlify</a> make it easy to
publish specific git branches and sub directories.</p>

<h2 id="ox-hugo">ox-hugo</h2>

<p>This is the main config, it configures ox-hugo, initializes our hugo
directory, and sets up hugo server to run inside an Emacs eshell.</p>

<div class='block-header tangle'>Create in ./emacs/blog.el</div>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="p">(</span><span class="nb">use-package</span> <span class="nv">ox-hugo</span>
  <span class="nb">:ensure</span> <span class="no">t</span>
  <span class="nb">:after</span> <span class="nv">ox</span>
  <span class="nb">:init</span>
  <span class="c1">;; set my/blog-root to the directory containing blog.org:</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">my/blog-root</span> <span class="p">(</span><span class="nf">expand-file-name</span> <span class="s">&#34;~/git/rymcg.tech&#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">my/blog-file</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my/blog-root</span> <span class="s">&#34;/blog.org&#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">my/hugo-root</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my/blog-root</span> <span class="s">&#34;/hugo&#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">my/hugo-bin</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my/hugo-root</span> <span class="s">&#34;/go/bin/hugo&#34;</span><span class="p">))</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">my/hugo-public-branch</span> <span class="s">&#34;public&#34;</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">setq</span> <span class="nv">my/hugo-server-url</span> <span class="s">&#34;http://localhost:1313&#34;</span><span class="p">)</span>

  <span class="c1">;; blog related functions defined inside of use-package&#39; =:init= conveniently</span>
  <span class="c1">;; dissappear from your system if the package install fails. So I kind of like that.</span>
  <span class="p">(</span><span class="nb">defun</span> <span class="nv">blog-init</span> <span class="p">()</span>
    <span class="c1">;; Tangle all files:</span>
    <span class="p">(</span><span class="nv">org-babel-tangle-file</span> <span class="nv">my/blog-file</span><span class="p">)</span>
    <span class="c1">;; Create theme files if necessary:</span>
    <span class="p">((</span><span class="nb">lambda</span> <span class="p">(</span><span class="nv">filepath</span> <span class="nv">block-list</span><span class="p">)</span>
       <span class="s">&#34;Open an Org file and eval a list of named code blocks in it&#34;</span>
       <span class="p">(</span><span class="nb">save-window-excursion</span>
         <span class="p">(</span><span class="nv">find-file</span> <span class="nv">filepath</span><span class="p">)</span>
         <span class="p">(</span><span class="nb">dolist</span> <span class="p">(</span><span class="nv">codeblock</span> <span class="nv">block-list</span><span class="p">)</span>
           <span class="p">(</span><span class="nv">org-babel-goto-named-src-block</span> <span class="nv">codeblock</span><span class="p">)</span>
           <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">org-confirm-babel-evaluate</span> <span class="no">nil</span><span class="p">))</span>
             <span class="p">(</span><span class="nv">org-babel-execute-src-block-maybe</span><span class="p">)))))</span>
     <span class="nv">my/blog-file</span> <span class="o">&#39;</span><span class="p">(</span><span class="s">&#34;hugo-import-theme&#34;</span><span class="p">)))</span>
  <span class="p">(</span><span class="nv">blog-init</span><span class="p">)</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">blog-publish</span> <span class="p">(</span><span class="nv">keep-branch</span><span class="p">)</span>
    <span class="s">&#34;Build and publish the blog to the public branch.
</span><span class="s">
</span><span class="s">    If keep-branch is non nil, make a new commit on an existing
</span><span class="s">    branch. Otherwise blog-publish will delete the old branch and
</span><span class="s">    create a new branch each time.
</span><span class="s">
</span><span class="s">    I have no need to store the history of intermediary files, so I
</span><span class="s">    delete the public branch everytime I publish and the only
</span><span class="s">    commit in it is a snapshot of the current site.
</span><span class="s">
</span><span class="s">    If this site gets big, I may want to not do that, because
</span><span class="s">    I&#39;ll bet you get a lot more efficiency transferring a diff
</span><span class="s">    than you do the entire contents of the site.&#34;</span>
    <span class="p">(</span><span class="nb">interactive</span> <span class="s">&#34;P&#34;</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">equal</span> <span class="p">(</span><span class="nf">buffer-file-name</span> <span class="p">(</span><span class="nf">current-buffer</span><span class="p">))</span> <span class="nv">my/blog-file</span><span class="p">)</span>
      <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;You can only do that in the active buffer of the blog&#34;</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">call-process-shell-command</span>
                  <span class="s">&#34;git diff-index --quiet HEAD --&#34;</span><span class="p">))</span>
      <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;You need to commit your changes before publishing.&#34;</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">call-process-shell-command</span>
                  <span class="s">&#34;[[ `git rev-parse --abbrev-ref HEAD` == \&#34;master\&#34; ]]&#34;</span><span class="p">))</span>
      <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;You need to start on the master branch&#34;</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">default-directory</span> <span class="nv">my/blog-root</span><span class="p">))</span>
      <span class="c1">;; Tangle all files:</span>
      <span class="p">(</span><span class="nv">org-babel-tangle-file</span> <span class="nv">my/blog-file</span><span class="p">)</span>
      <span class="c1">;; Run ox-hugo to generate Markdown:</span>
      <span class="p">(</span><span class="nv">org-hugo-export-subtree-to-md</span> <span class="mi">1</span><span class="p">)</span>
      <span class="c1">;; Run hugo to generate HTML:</span>
      <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">default-directory</span> <span class="nv">my/hugo-root</span><span class="p">))</span>
        <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="s">&#34;./go/bin/hugo&#34;</span><span class="p">))</span>
          <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;hugo failed&#34;</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nv">not</span> <span class="nv">keep-branch</span><span class="p">)</span>
          <span class="c1">;; Delete public branch:</span>
          <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;git branch -D &#34;</span>
                                              <span class="nv">my/hugo-public-branch</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">/=</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">call-process-shell-command</span>
                 <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;git rev-parse --verify &#34;</span> <span class="nv">my/hugo-public-branch</span><span class="p">)))</span>
          <span class="p">(</span><span class="nb">progn</span>
            <span class="c1">;; Create a new branch in another dimension:</span>
            <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;git checkout --orphan &#34;</span>
                                                <span class="nv">my/hugo-public-branch</span><span class="p">))</span>
            <span class="c1">;; Get rid of the klingons:</span>
            <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="s">&#34;git rm --cached -r .&#34;</span><span class="p">)</span>
            <span class="c1">;; We only want to commit public site material:</span>
            <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;echo -e &#39;*\n&#34;</span>
                                                <span class="s">&#34;!.gitignore\n&#34;</span>
                                                <span class="s">&#34;!hugo/\n&#34;</span>
                                                <span class="s">&#34;!hugo/public/\n&#34;</span>
                                                <span class="s">&#34;!hugo/public/*\n&#34;</span>
                                                <span class="s">&#34;!hugo/public/**/*\n&#34;</span>
                                                <span class="s">&#34;&#39; &gt; .gitignore&#34;</span><span class="p">))</span>
            <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="s">&#34;git add .gitignore&#34;</span><span class="p">)</span>
            <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="s">&#34;git commit -m &#39;initial static html setup&#39;&#34;</span><span class="p">))</span>
        <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;git checkout &#34;</span>
                                                         <span class="nv">my/hugo-public-branch</span><span class="p">)))</span>
          <span class="p">(</span><span class="ne">error</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;could not check out &#34;</span> <span class="nv">my/hugo-public-branch</span> <span class="s">&#34; branch&#34;</span><span class="p">))))</span>
      <span class="c1">;; Commit static site files:</span>
      <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="s">&#34;git add hugo/public/* &amp;&amp; git commit -m public&#34;</span><span class="p">))</span>
        <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;commit failed&#34;</span><span class="p">))</span>
      <span class="c1">;; Go back to master:</span>
      <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="s">&#34;git checkout master&#34;</span><span class="p">))</span>
        <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;could not switch back to master branch!&#34;</span><span class="p">))</span>
      <span class="c1">;; Push</span>
      <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;git push ...&#34;</span><span class="p">)</span>
      <span class="p">(</span><span class="nb">unless</span> <span class="p">(</span><span class="nf">=</span> <span class="mi">0</span> <span class="p">(</span><span class="nv">call-process-shell-command</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;git push -f origin &#34;</span>
                                          <span class="nv">my/hugo-public-branch</span><span class="p">)))</span>
        <span class="p">(</span><span class="ne">error</span> <span class="s">&#34;push failed&#34;</span><span class="p">))</span>
      <span class="p">(</span><span class="nf">message</span> <span class="s">&#34;Yay!&#34;</span><span class="p">)))</span>

  <span class="p">(</span><span class="nb">defun</span> <span class="nv">hugo-server-start</span> <span class="p">()</span>
    <span class="s">&#34;Start hugo server in an inferior shell&#34;</span>
    <span class="p">(</span><span class="nb">interactive</span><span class="p">)</span>
    <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">eshell-buffer-name</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;*hugo-server-&#34;</span> <span class="nv">my/hugo-root</span> <span class="s">&#34;*&#34;</span><span class="p">)))</span>
      <span class="p">(</span><span class="nb">if</span> <span class="p">(</span><span class="nf">bufferp</span> <span class="p">(</span><span class="nf">get-buffer</span> <span class="nv">eshell-buffer-name</span><span class="p">))</span>
          <span class="p">(</span><span class="nf">kill-buffer</span> <span class="nv">eshell-buffer-name</span><span class="p">))</span>
      <span class="p">(</span><span class="nv">eshell</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">eshell-return-to-prompt</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;cd &#34;</span> <span class="nv">my/hugo-root</span><span class="p">))</span>
      <span class="p">(</span><span class="nv">eshell-send-input</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">concat</span> <span class="nv">my/hugo-bin</span> <span class="s">&#34; server -D --navigateToChanged&#34;</span><span class="p">))</span>
      <span class="p">(</span><span class="nv">eshell-send-input</span><span class="p">)</span>
      <span class="p">(</span><span class="nv">browse-url</span> <span class="nv">my/hugo-server-url</span><span class="p">)</span>
      <span class="p">(</span><span class="nf">message</span> <span class="nv">eshell-buffer-name</span><span class="p">))))</span></code></pre></div>
<h2 id="hugo-site-skeleton">Hugo site skeleton</h2>

<p>Here&rsquo;s my main hugo config file:</p>

<div class='block-header tangle'>Create in ./hugo/config.yml</div>
<div class="highlight"><pre class="chroma"><code class="language-yml" data-lang="yml">baseURL: &#34;https://blog.rymcg.tech/&#34;
languageCode: &#34;en-us&#34;
DefaultContentLanguage: &#34;en&#34;

title: &#34;rymcg.tech&#34;
theme: &#34;docdock&#34;

pygmentsCodeFences: true
pygmentsUseClasses: true

params:
  noHomeIcon: true
  noSearch: false
  showVisitedLinks: true
  ordersectionsby: &#34;weight&#34;
  themeVariant: &#34;rymcg&#34;
  subTitle: &#34;Technology by Ryan McGuire&#34;

outputs:
  home:
    - HTML
    - RSS
    - JSON

mediaTypes:
  &#34;text/plain&#34;:
    suffix: &#34;org&#34;</code></pre></div>
<p>Create our site header:</p>

<div class='block-header tangle'>Create in ./hugo/content/_header.md</div>
<div class="highlight"><pre class="chroma"><code class="language-markdown" data-lang="markdown">rymcg.tech</code></pre></div>
<p>Import the theme:</p>

<div class='block-header exec'>hugo-import-theme<br/>Run in ./hugo</div>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell"><span class="k">if</span> <span class="o">[</span> ! -d themes/docdock <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    mkdir -p themes
    git submodule add -f https://github.com/EnigmaCurry/hugo-theme-docdock themes/docdock
<span class="k">fi</span></code></pre></div>
<p>Customize the header for each page, include any <a href="https://gohugo.io/variables/page/">Hugo Page Variables</a>:</p>

<div class='block-header tangle'>Create in ./hugo/layouts/partials/custom-post-header.html</div>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&#34;post-meta&#34;</span><span class="p"></span><span class="p">&gt;</span>
{{if $.Param &#34;draft&#34;}}
   <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&#34;notices info&#34;</span><span class="p"></span><span class="p">&gt;</span>This page is an unpublished draft.<span class="p">&lt;</span><span class="p">/</span><span class="nt">div</span><span class="p">&gt;</span>
{{end}}
   {{if $.Param &#34;author&#34;}}
  Author: {{ $.Param &#34;author&#34;}}<span class="p">&lt;</span><span class="nt">br</span><span class="p">/</span><span class="p">&gt;</span>
{{end}}
{{if not .Date.IsZero}}
  Published: {{.Date.Format &#34;January 1, 2006&#34;}}
  {{if ne .Lastmod .Date}}(<span class="p">&lt;</span><span class="nt">b</span><span class="p"></span><span class="p">&gt;</span>last update: {{.Lastmod.Format &#34;January 1, 2006&#34;}}<span class="p">&lt;</span><span class="p">/</span><span class="nt">b</span><span class="p">&gt;</span>){{end}}<span class="p">&lt;</span><span class="nt">br</span><span class="p">/</span><span class="p">&gt;</span>
{{end}}
<span class="p">&lt;</span><span class="p">/</span><span class="nt">div</span><span class="p">&gt;</span></code></pre></div>
<p>Create our own theme variant:</p>

<div class='block-header tangle'>Create in ./hugo/static/css/theme-rymcg.css</div>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">:</span><span class="nd">root</span><span class="p">{</span>
    <span class="err">--</span><span class="n">MAIN-BACK-color</span><span class="p">:</span><span class="mh">#ddd</span><span class="p">;</span>
    <span class="err">--</span><span class="n">MAIN-TXT-color</span><span class="p">:</span> <span class="mh">#000</span><span class="p">;</span>
    <span class="err">--</span><span class="n">MAIN-LINK-color</span><span class="p">:</span><span class="mh">#3995b1</span><span class="p">;</span>
    <span class="err">--</span><span class="n">MAIN-HOVER-color</span><span class="p">:</span><span class="mh">#c51212</span><span class="p">;</span>
    <span class="err">--</span><span class="n">SIDE-MAIN-color</span><span class="p">:</span><span class="mh">#444</span><span class="p">;</span>
    <span class="err">--</span><span class="n">SIDE-MAIN-TXT-color</span><span class="p">:</span><span class="mh">#fff</span><span class="p">;</span>
    <span class="err">--</span><span class="n">SIDE-FOCUS-BACK-color</span><span class="p">:</span><span class="mh">#707070</span><span class="p">;</span>
    <span class="err">--</span><span class="n">SIDE-FOCUS-FORE-color</span><span class="p">:</span><span class="kc">black</span><span class="p">;</span>
    <span class="err">--</span><span class="n">MENU-LINK-color</span><span class="p">:</span><span class="mh">#fff</span><span class="p">;</span>
    <span class="err">--</span><span class="n">MENU-ACTIVE-BACK-color</span><span class="p">:</span><span class="mh">#505050</span><span class="p">;</span>
    <span class="err">--</span><span class="n">MENU-ACTIVE-LINK-color</span><span class="p">:</span><span class="kc">white</span><span class="p">;</span>
    <span class="err">--</span><span class="n">NAV-HOVER-color</span><span class="p">:</span><span class="mh">#bbb</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">header-wrapper</span> <span class="p">{</span>
    <span class="k">border-bottom</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="nt">ul</span> <span class="nt">li</span><span class="p">.</span><span class="nc">visited</span> <span class="o">&gt;</span> <span class="nt">a</span> <span class="p">.</span><span class="nc">read-icon</span> <span class="p">{</span>
	<span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">SIDE</span><span class="o">-</span><span class="n">MAIN</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">a</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MAIN</span><span class="o">-</span><span class="n">LINK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MAIN</span><span class="o">-</span><span class="n">HOVER</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">body</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MAIN</span><span class="o">-</span><span class="n">BACK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
    <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MAIN</span><span class="o">-</span><span class="n">TXT</span><span class="o">-</span><span class="kc">color</span><span class="p">)</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">body</span> <span class="nt">a</span><span class="p">.</span><span class="nc">highlight</span><span class="p">:</span><span class="nd">after</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MAIN</span><span class="o">-</span><span class="n">HOVER</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="p">{</span>
	<span class="k">background-color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">SIDE</span><span class="o">-</span><span class="n">MAIN</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="p">#</span><span class="nn">header-wrapper</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">SIDE</span><span class="o">-</span><span class="n">MAIN</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
    <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">BF</span><span class="o">-</span><span class="kc">color</span><span class="p">)</span>
    <span class="k">border</span><span class="o">-</span><span class="kc">color</span><span class="o">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">SIDE</span><span class="o">-</span><span class="n">FOCUS</span><span class="o">-</span><span class="n">BACK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="p">.</span><span class="nc">searchbox</span> <span class="p">{</span>
	<span class="k">border-color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">BF</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
    <span class="k">background</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">SIDE</span><span class="o">-</span><span class="n">FOCUS</span><span class="o">-</span><span class="n">BACK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="nt">ul</span><span class="p">.</span><span class="nc">topics</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="p">.</span><span class="nc">parent</span><span class="o">,</span> <span class="p">#</span><span class="nn">sidebar</span> <span class="nt">ul</span><span class="p">.</span><span class="nc">topics</span> <span class="o">&gt;</span> <span class="nt">li</span><span class="p">.</span><span class="nc">active</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">SIDE</span><span class="o">-</span><span class="n">FOCUS</span><span class="o">-</span><span class="n">BACK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="p">.</span><span class="nc">searchbox</span> <span class="o">*</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">SIDE</span><span class="o">-</span><span class="n">FOCUS</span><span class="o">-</span><span class="n">FORE</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="nt">a</span> <span class="o">,</span> <span class="p">#</span><span class="nn">sidebar</span> <span class="nt">a</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MENU</span><span class="o">-</span><span class="n">LINK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="p">.</span><span class="nc">parent</span> <span class="nt">li</span><span class="o">,</span> <span class="p">#</span><span class="nn">sidebar</span> <span class="p">.</span><span class="nc">active</span> <span class="nt">li</span> <span class="p">{</span>
    <span class="k">border-color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MENU</span><span class="o">-</span><span class="n">ACTIVE</span><span class="o">-</span><span class="n">LINK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="nt">ul</span> <span class="nt">li</span><span class="p">.</span><span class="nc">active</span> <span class="o">&gt;</span> <span class="nt">a</span> <span class="p">{</span>
    <span class="k">background</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MENU</span><span class="o">-</span><span class="n">ACTIVE</span><span class="o">-</span><span class="n">BACK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
    <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MENU</span><span class="o">-</span><span class="n">ACTIVE</span><span class="o">-</span><span class="n">LINK</span><span class="o">-</span><span class="kc">color</span><span class="p">)</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="nt">ul</span> <span class="nt">li</span> <span class="p">.</span><span class="nc">category-icon</span> <span class="p">{</span>
	<span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">MENU</span><span class="o">-</span><span class="n">LINK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>
<span class="p">#</span><span class="nn">sidebar</span> <span class="p">#</span><span class="nn">shortcuts</span> <span class="nt">h3</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">SIDE</span><span class="o">-</span><span class="n">MAIN</span><span class="o">-</span><span class="n">TXT</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>

<span class="p">.</span><span class="nc">footline</span> <span class="p">{</span>
	<span class="k">border-color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">SIDE</span><span class="o">-</span><span class="n">FOCUS</span><span class="o">-</span><span class="n">BACK</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span>

<span class="nt">div</span><span class="p">.</span><span class="nc">block-header</span> <span class="p">{</span>
    <span class="k">color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
    <span class="k">padding-left</span><span class="p">:</span> <span class="mi">1</span><span class="kt">em</span><span class="p">;</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="kc">monospace</span><span class="p">;</span>
    <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
    <span class="k">border-radius</span><span class="p">:</span> <span class="mi">8</span><span class="kt">px</span> <span class="mi">8</span><span class="kt">px</span> <span class="mi">0</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">.</span><span class="nc">block-header</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#4d4b54</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">.</span><span class="nc">block-header</span><span class="p">.</span><span class="nc">tangle</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#4e3a82</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">.</span><span class="nc">block-header</span><span class="p">.</span><span class="nc">exec</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#b93838</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">copy-to-clipboard</span> <span class="p">{</span>
    <span class="k">margin-top</span><span class="p">:</span> <span class="mi">-1</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">pre</span> <span class="p">{</span>
    <span class="k">border-radius</span><span class="p">:</span> <span class="mi">0</span> <span class="mi">0</span> <span class="mi">8</span><span class="kt">px</span> <span class="mi">8</span><span class="kt">px</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">pre</span> <span class="p">.</span><span class="nc">copy-to-clipboard</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#fff</span><span class="p">;</span>
    <span class="k">border</span><span class="p">:</span> <span class="mi">1</span><span class="kt">px</span> <span class="kc">solid</span> <span class="mh">#272a2c</span> <span class="cp">!important</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">pre</span> <span class="p">.</span><span class="nc">copy-to-clipboard</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffa</span><span class="p">;</span>
<span class="p">}</span>

<span class="nt">div</span><span class="p">#</span><span class="nn">tags</span> <span class="p">{</span>
    <span class="k">float</span><span class="p">:</span> <span class="kc">none</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">#</span><span class="nn">breadcrumbs</span> <span class="p">{</span>
    <span class="k">width</span><span class="p">:</span> <span class="nb">calc</span><span class="p">(</span><span class="mi">100</span><span class="kt">%</span> <span class="o">-</span> <span class="mi">20</span><span class="kt">px</span><span class="p">);</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">#</span><span class="nn">body-inner</span> <span class="p">{</span>
    <span class="k">max-width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">ch</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">#</span><span class="nn">body-inner</span> <span class="nt">h1</span> <span class="p">{</span>
    <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">#</span><span class="nn">post-meta</span> <span class="p">{</span>
    <span class="k">font-size</span><span class="p">:</span> <span class="mf">0.7</span><span class="kt">em</span><span class="p">;</span>
    <span class="k">font-family</span><span class="p">:</span> <span class="kc">sans-serif</span><span class="p">;</span>
    <span class="k">margin-bottom</span><span class="p">:</span> <span class="mi">3</span><span class="kt">em</span><span class="p">;</span>
<span class="p">}</span>
<span class="nt">div</span><span class="p">#</span><span class="nn">body-inner</span> <span class="nt">pre</span> <span class="p">{</span>
    <span class="k">margin-top</span><span class="p">:</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>

<span class="p">#</span><span class="nn">body</span> <span class="p">.</span><span class="nc">nav</span><span class="p">:</span><span class="nd">hover</span> <span class="p">{</span>
    <span class="k">background-color</span><span class="p">:</span> <span class="nf">var</span><span class="p">(</span><span class="o">--</span><span class="n">NAV</span><span class="o">-</span><span class="n">HOVER</span><span class="o">-</span><span class="kc">color</span><span class="p">);</span>
<span class="p">}</span></code></pre></div>
<p>Most syntax highlighting is done with Chroma, which is builtin to
hugo. The site uses the <code>perldoc</code> theme:</p>

<div class='block-header tangle'>Create in ./hugo/static/css/theme-rymcg.css</div>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="c">/* perldoc syntax highlight style */</span>
<span class="c">/* Background */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#eeeedd</span> <span class="p">}</span>
<span class="c">/* Error */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">err</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#a61717</span><span class="p">;</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#e3d2d2</span> <span class="p">}</span>
<span class="c">/* LineHighlight */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">hl</span> <span class="p">{</span> <span class="k">background-color</span><span class="p">:</span> <span class="mh">#ffffcc</span><span class="p">;</span> <span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span> <span class="k">width</span><span class="p">:</span> <span class="mi">100</span><span class="kt">%</span> <span class="p">}</span>
<span class="c">/* LineNumbers */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">ln</span> <span class="p">{</span> <span class="p">;</span> <span class="k">margin-right</span><span class="p">:</span> <span class="mf">0.4</span><span class="kt">em</span><span class="p">;</span> <span class="k">padding</span><span class="p">:</span> <span class="mi">0</span> <span class="mf">0.4</span><span class="kt">em</span> <span class="mi">0</span> <span class="mf">0.4</span><span class="kt">em</span><span class="p">;</span> <span class="p">}</span>
<span class="c">/* Keyword */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">k</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#8b008b</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* KeywordConstant */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">kc</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#8b008b</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* KeywordDeclaration */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">kd</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#8b008b</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* KeywordNamespace */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">kn</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#8b008b</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* KeywordPseudo */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">kp</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#8b008b</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* KeywordReserved */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">kr</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#8b008b</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* KeywordType */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">kt</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#00688b</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* NameAttribute */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">na</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#658b00</span> <span class="p">}</span>
<span class="c">/* NameBuiltin */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">nb</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#658b00</span> <span class="p">}</span>
<span class="c">/* NameClass */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">nc</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#008b45</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* NameConstant */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">no</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#00688b</span> <span class="p">}</span>
<span class="c">/* NameDecorator */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">nd</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#707a7c</span> <span class="p">}</span>
<span class="c">/* NameException */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">ne</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#008b45</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* NameFunction */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">nf</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#008b45</span> <span class="p">}</span>
<span class="c">/* NameNamespace */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">nn</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#008b45</span> <span class="p">}</span>
<span class="c">/* NameTag */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">nt</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#8b008b</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* NameVariable */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">nv</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#00688b</span> <span class="p">}</span>
<span class="c">/* LiteralString */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">s</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringAffix */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">sa</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringBacktick */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">sb</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringChar */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">sc</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringDelimiter */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">dl</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringDoc */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">sd</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringDouble */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">s2</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringEscape */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">se</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringHeredoc */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">sh</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#1c7e71</span><span class="p">;</span> <span class="k">font-style</span><span class="p">:</span> <span class="kc">italic</span> <span class="p">}</span>
<span class="c">/* LiteralStringInterpol */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">si</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringOther */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">sx</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cb6c20</span> <span class="p">}</span>
<span class="c">/* LiteralStringRegex */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">sr</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#1c7e71</span> <span class="p">}</span>
<span class="c">/* LiteralStringSingle */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">s1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralStringSymbol */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">ss</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#cd5555</span> <span class="p">}</span>
<span class="c">/* LiteralNumber */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">m</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#b452cd</span> <span class="p">}</span>
<span class="c">/* LiteralNumberBin */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">mb</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#b452cd</span> <span class="p">}</span>
<span class="c">/* LiteralNumberFloat */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">mf</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#b452cd</span> <span class="p">}</span>
<span class="c">/* LiteralNumberHex */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">mh</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#b452cd</span> <span class="p">}</span>
<span class="c">/* LiteralNumberInteger */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">mi</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#b452cd</span> <span class="p">}</span>
<span class="c">/* LiteralNumberIntegerLong */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">il</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#b452cd</span> <span class="p">}</span>
<span class="c">/* LiteralNumberOct */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">mo</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#b452cd</span> <span class="p">}</span>
<span class="c">/* OperatorWord */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">ow</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#8b008b</span> <span class="p">}</span>
<span class="c">/* Comment */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">c</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#228b22</span> <span class="p">}</span>
<span class="c">/* CommentHashbang */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">ch</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#228b22</span> <span class="p">}</span>
<span class="c">/* CommentMultiline */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">cm</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#228b22</span> <span class="p">}</span>
<span class="c">/* CommentSingle */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">c1</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#228b22</span> <span class="p">}</span>
<span class="c">/* CommentSpecial */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">cs</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#8b008b</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* CommentPreproc */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">cp</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#1e889b</span> <span class="p">}</span>
<span class="c">/* CommentPreprocFile */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">cpf</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#1e889b</span> <span class="p">}</span>
<span class="c">/* GenericDeleted */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">gd</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#aa0000</span> <span class="p">}</span>
<span class="c">/* GenericEmph */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">ge</span> <span class="p">{</span> <span class="k">font-style</span><span class="p">:</span> <span class="kc">italic</span> <span class="p">}</span>
<span class="c">/* GenericError */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">gr</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#aa0000</span> <span class="p">}</span>
<span class="c">/* GenericHeading */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">gh</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#000080</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* GenericInserted */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">gi</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#00aa00</span> <span class="p">}</span>
<span class="c">/* GenericOutput */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">go</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#888888</span> <span class="p">}</span>
<span class="c">/* GenericPrompt */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">gp</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#555555</span> <span class="p">}</span>
<span class="c">/* GenericStrong */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">gs</span> <span class="p">{</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* GenericSubheading */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">gu</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#800080</span><span class="p">;</span> <span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span> <span class="p">}</span>
<span class="c">/* GenericTraceback */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">gt</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#aa0000</span> <span class="p">}</span>
<span class="c">/* TextWhitespace */</span> <span class="p">.</span><span class="nc">chroma</span> <span class="p">.</span><span class="nc">w</span> <span class="p">{</span> <span class="k">color</span><span class="p">:</span> <span class="mh">#bbbbbb</span> <span class="p">}</span></code></pre></div>
<p>As a fallback, highlight.js is used for blocks that chroma can&rsquo;t
handle. Here&rsquo;s a slight mod of the <code>purebasic</code> theme:</p>

<div class='block-header tangle'>Create in ./hugo/static/css/hybrid.css</div>
<div class="highlight"><pre class="chroma"><code class="language-css" data-lang="css"><span class="p">.</span><span class="nc">hljs</span> <span class="p">{</span>
	<span class="k">background</span><span class="p">:</span> <span class="mh">#eeeedd</span> <span class="cp">!important</span><span class="p">;</span>
	<span class="k">display</span><span class="p">:</span> <span class="kc">block</span><span class="p">;</span>
	<span class="k">overflow-x</span><span class="p">:</span> <span class="kc">auto</span><span class="p">;</span>
	<span class="k">padding</span><span class="p">:</span> <span class="mf">0.5</span><span class="kt">em</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">hljs</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-type</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-function</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-name</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-number</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-attr</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-params</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-subst</span> <span class="p">{</span>
	<span class="k">color</span><span class="p">:</span> <span class="mh">#000000</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">hljs-comment</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-regexp</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-section</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-selector-pseudo</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-addition</span> <span class="p">{</span>
	<span class="k">color</span><span class="p">:</span> <span class="mh">#00AAAA</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">hljs-title</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-tag</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-variable</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-code</span> <span class="p">{</span>
	<span class="k">color</span><span class="p">:</span> <span class="mh">#006666</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">hljs-keyword</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-class</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-meta-keyword</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-selector-class</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-built_in</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-builtin-name</span> <span class="p">{</span>
	<span class="k">color</span><span class="p">:</span> <span class="mh">#006666</span><span class="p">;</span>
	<span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">hljs-string</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-selector-attr</span> <span class="p">{</span>
	<span class="k">color</span><span class="p">:</span> <span class="mh">#0080FF</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">hljs-symbol</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-link</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-deletion</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-attribute</span> <span class="p">{</span>
	<span class="k">color</span><span class="p">:</span> <span class="mh">#924B72</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">hljs-meta</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-literal</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-selector-id</span> <span class="p">{</span>
	<span class="k">color</span><span class="p">:</span> <span class="mh">#924B72</span><span class="p">;</span>
	<span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">hljs-strong</span><span class="o">,</span><span class="p">.</span><span class="nc">hljs-name</span> <span class="p">{</span>
	<span class="k">font-weight</span><span class="p">:</span> <span class="kc">bold</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">.</span><span class="nc">hljs-emphasis</span> <span class="p">{</span>
	<span class="k">font-style</span><span class="p">:</span> <span class="kc">italic</span><span class="p">;</span>
<span class="p">}</span></code></pre></div>
<h2 id="code-block-headers">Code block headers</h2>

<p>When reading code blocks in Org file source it&rsquo;s pretty easy to see
what file it&rsquo;s referring to, by looking at the <code>:tangle</code> parameter:</p>

<div class='block-header example'>Example</div>
<div class="highlight"><pre class="chroma"><code class="language-text" data-lang="text">#+BEGIN_SRC emacs-lisp :tangle /some/path/example.el
  (messsage &#34;example&#34;)
#+END_SRC</code></pre></div>
<p>But when this is exported to HTML, you don&rsquo;t get to see the <code>:tangle</code>
part, which means either the reader has to infer it from the context,
or you need to add extra text to the document. The first form is
confusing to the user reading in his web browser. The latter form
means you&rsquo;re repeating yourself, and when you refactor path names, you
will have an additional thing you need to edit, or else an opportunity
arises for the documentation to diverge from the code. Messy.</p>

<p>Let&rsquo;s automatically add headers to all the code blocks exported to
HTML.</p>

<ul>
<li>Tangled code should have header with <code>Create in $FILE</code></li>
<li>Shell code blocks should have header with <code>Run in $DIR</code></li>
<li>Example blocks should have header with <code>Example</code></li>
</ul>

<div class='block-header tangle'>Create in ./emacs/blog.el</div>
<div class="highlight"><pre class="chroma"><code class="language-emacs-lisp" data-lang="emacs-lisp"><span class="c1">;; original credit to John Kitchin - https://stackoverflow.com/a/38876439/56560</span>
<span class="p">(</span><span class="nb">defun</span> <span class="nv">rymcg/org-hugo-export-block-headers</span> <span class="p">(</span><span class="nv">backend</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">src-blocks</span> <span class="p">(</span><span class="nv">org-element-map</span> <span class="p">(</span><span class="nv">org-element-parse-buffer</span><span class="p">)</span> <span class="ss">&#39;src-block</span> <span class="nf">#&#39;identity</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">setq</span> <span class="nv">src-blocks</span> <span class="p">(</span><span class="nf">nreverse</span> <span class="nv">src-blocks</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">src</span> <span class="nv">in</span> <span class="nv">src-blocks</span>
          <span class="nb">do</span>
          <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nv">org-element-property</span> <span class="nb">:begin</span> <span class="nv">src</span><span class="p">))</span>
          <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">tangle</span> <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="nb">:tangle</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">2</span> <span class="p">(</span><span class="nv">org-babel-get-src-block-info</span><span class="p">)))))</span>
                <span class="p">(</span><span class="nv">directory</span> <span class="p">(</span><span class="nf">cdr</span> <span class="p">(</span><span class="nf">assoc</span> <span class="nb">:dir</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">2</span> <span class="p">(</span><span class="nv">org-babel-get-src-block-info</span><span class="p">)))))</span>
                <span class="p">(</span><span class="nv">language-name</span> <span class="p">(</span><span class="nv">first</span> <span class="p">(</span><span class="nv">org-babel-get-src-block-info</span><span class="p">)))</span>
                <span class="p">(</span><span class="nv">block-name</span> <span class="p">(</span><span class="nf">nth</span> <span class="mi">4</span> <span class="p">(</span><span class="nv">org-babel-get-src-block-info</span><span class="p">))))</span>
            <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">shell-block?</span> <span class="p">(</span><span class="nf">equal</span> <span class="nv">language-name</span> <span class="s">&#34;shell&#34;</span><span class="p">))</span>
                  <span class="p">(</span><span class="nv">tangle-block?</span> <span class="p">(</span><span class="nv">not</span> <span class="p">(</span><span class="nf">equal</span> <span class="nv">tangle</span> <span class="s">&#34;no&#34;</span><span class="p">))))</span>
              <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">block-name-fmt</span> <span class="p">(</span><span class="nb">if</span> <span class="nv">block-name</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;%s&lt;br/&gt;&#34;</span> <span class="nv">block-name</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">))</span>
                    <span class="p">(</span><span class="nv">html-class</span> <span class="p">(</span><span class="nb">cond</span> <span class="p">(</span><span class="nv">tangle-block?</span> <span class="s">&#34;block-header tangle&#34;</span><span class="p">)</span>
                                      <span class="p">(</span><span class="nv">shell-block?</span> <span class="s">&#34;block-header exec&#34;</span><span class="p">)</span>
                                      <span class="p">(</span><span class="s">&#34;block-header&#34;</span><span class="p">)))</span>
                    <span class="p">(</span><span class="nv">header-txt</span> <span class="p">(</span><span class="nb">cond</span> <span class="p">(</span><span class="nv">tangle-block?</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;Create in %s&#34;</span> <span class="nv">tangle</span><span class="p">))</span>
                                      <span class="p">(</span><span class="nv">shell-block?</span>
                                       <span class="p">(</span><span class="nf">concat</span> <span class="s">&#34;Run&#34;</span> <span class="p">(</span><span class="nb">if</span> <span class="nv">directory</span>
                                                         <span class="p">(</span><span class="nf">format</span> <span class="s">&#34; in %s&#34;</span> <span class="nv">directory</span><span class="p">)</span> <span class="s">&#34;&#34;</span><span class="p">)))</span>
                                      <span class="p">((</span><span class="nv">not</span> <span class="nv">block-name</span><span class="p">)</span> <span class="s">&#34; &#34;</span><span class="p">)</span>
                                      <span class="p">(</span><span class="s">&#34;&#34;</span><span class="p">))))</span>
                <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;\n#+HTML: &lt;div class=&#39;%s&#39;&gt;%s%s&lt;/div&gt;\n&#34;</span> <span class="nv">html-class</span>
                                <span class="nv">block-name-fmt</span> <span class="nv">header-txt</span><span class="p">)))))))</span>

  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">ex-blocks</span> <span class="p">(</span><span class="nv">org-element-map</span> <span class="p">(</span><span class="nv">org-element-parse-buffer</span><span class="p">)</span> <span class="ss">&#39;example-block</span> <span class="nf">#&#39;identity</span><span class="p">)))</span>
    <span class="p">(</span><span class="nb">setq</span> <span class="nv">ex-blocks</span> <span class="p">(</span><span class="nf">nreverse</span> <span class="nv">ex-blocks</span><span class="p">))</span>
    <span class="p">(</span><span class="nb">loop</span> <span class="nv">for</span> <span class="nv">ex</span> <span class="nv">in</span> <span class="nv">ex-blocks</span>
          <span class="nb">do</span>
          <span class="p">(</span><span class="nf">goto-char</span> <span class="p">(</span><span class="nv">org-element-property</span> <span class="nb">:begin</span> <span class="nv">ex</span><span class="p">))</span>
          <span class="p">(</span><span class="nf">insert</span> <span class="p">(</span><span class="nf">format</span> <span class="s">&#34;\n#+HTML: &lt;div class=&#39;block-header example&#39;&gt;Example&lt;/div&gt;\n&#34;</span><span class="p">)))))</span>

<span class="p">(</span><span class="nb">defadvice</span> <span class="nv">org-hugo-export-subtree-to-md</span> <span class="p">(</span><span class="nv">around</span> <span class="nv">org-hugo-export-advice</span><span class="p">)</span>
  <span class="p">(</span><span class="nb">let</span> <span class="p">((</span><span class="nv">org-export-before-processing-hook</span> <span class="o">&#39;</span><span class="p">(</span><span class="nv">rymcg/org-hugo-export-block-headers</span><span class="p">)))</span>
    <span class="nv">ad-do-it</span><span class="p">))</span>
<span class="p">(</span><span class="nv">ad-activate</span> <span class="ss">&#39;org-hugo-export-subtree-to-md</span><span class="p">)</span></code></pre></div>
<h2 id="rss">RSS</h2>

<p>Hugo ships with it&rsquo;s own <a href="https://gohugo.io/templates/rss/#the-embedded-rss-xml">RSS template</a>, but let&rsquo;s create our own:</p>

<ul>
<li>Only include the 30 most recent entries.</li>
<li>Display in reverse chronological order.</li>
<li>Include any pages that have a date, <em>including <code>_index</code> pages</em>.

<ul>
<li>The date must be set in the front matter params, by ox-hugo.</li>
</ul></li>
</ul>

<div class='block-header tangle'>Create in ./hugo/layouts/rss.xml</div>
<div class="highlight"><pre class="chroma"><code class="language-xml" data-lang="xml"><span class="nt">&lt;rss</span> <span class="na">version=</span><span class="s">&#34;2.0&#34;</span> <span class="na">xmlns:atom=</span><span class="s">&#34;http://www.w3.org/2005/Atom&#34;</span><span class="nt">&gt;</span>
  <span class="nt">&lt;channel&gt;</span>
    <span class="nt">&lt;title&gt;</span>{{ .Site.Title }}<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;link&gt;</span>{{ .Permalink }}<span class="nt">&lt;/link&gt;</span>
    <span class="nt">&lt;description&gt;</span>Recent content on {{ .Site.Title }}<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;generator&gt;</span>Hugo -- gohugo.io<span class="nt">&lt;/generator&gt;</span> {{ with .Site.LanguageCode }}
    <span class="nt">&lt;language&gt;</span>{{.}}<span class="nt">&lt;/language&gt;</span> {{end}} {{ with .Site.Copyright }}
    <span class="nt">&lt;copyright&gt;</span>{{.}}<span class="nt">&lt;/copyright&gt;</span> {{end}} {{ if not .Date.IsZero }}
    <span class="nt">&lt;lastBuildDate&gt;</span>{{ .Date.Format &#34;Mon, 02 Jan 2006 15:04:05 -0700&#34; | safeHTML }}<span class="nt">&lt;/lastBuildDate&gt;</span>{{ end }}
    {{ range first 30 (where .Site.AllPages.ByDate.Reverse &#34;Params.date&#34; &#34;!=&#34; nil) }} <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;title&gt;</span>{{ .Title }}<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;link&gt;</span>{{ .Permalink }}<span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;pubDate&gt;</span>{{ .Date.Format &#34;Mon, 02 Jan 2006 15:04:05 -0700&#34; | safeHTML }}<span class="nt">&lt;/pubDate&gt;</span> {{ with .Site.Author.email }}
        <span class="nt">&lt;author&gt;</span>{{.}}{{ with $.Site.Author.name }} ({{.}}){{end}}<span class="nt">&lt;/author&gt;</span>{{end}}
        <span class="nt">&lt;guid&gt;</span>{{ .Permalink }}<span class="nt">&lt;/guid&gt;</span>
        <span class="nt">&lt;description&gt;</span>{{ .Summary | html }}<span class="nt">&lt;/description&gt;</span>
      <span class="nt">&lt;/item&gt;</span>{{ end }}
  <span class="nt">&lt;/channel&gt;</span>
<span class="nt">&lt;/rss&gt;</span></code></pre></div>
<p>Add a link to the RSS in the page head:</p>

<div class='block-header tangle'>Create in ./hugo/layouts/partials/custom-head.html</div>
<div class="highlight"><pre class="chroma"><code class="language-html" data-lang="html">{{ if .RSSLink }}
  <span class="p">&lt;</span><span class="nt">link</span> <span class="na">href</span><span class="o">=</span><span class="s">&#34;{{ .RSSLink }}&#34;</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;alternate&#34;</span> <span class="na">type</span><span class="o">=</span><span class="s">&#34;application/rss+xml&#34;</span> <span class="na">title</span><span class="o">=</span><span class="s">&#34;{{ .Site.Title }}&#34;</span> <span class="p">/</span><span class="p">&gt;</span>
{{ end }}</code></pre></div>

<footer class=" footline" >
	
</footer>




        

      </div>
    </div>

    
 
    

    <div id="navigation">
        <a class="nav nav-prev" href="/ox-hugo/license/" title="Licenses"> <i class="fa fa-chevron-left"></i></a>
        <a class="nav nav-next" href="/ox-hugo/creating-content/" title="Creating content" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
    </div>

    </section>
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>    

    <script src="/js/clipboard.min.js"></script>
<script src="/js/featherlight.min.js"></script>
<script src="/js/html5shiv-printshiv.min.js"></script>
<script src="/js/highlight.pack.js"></script>
<script>hljs.initHighlightingOnLoad();</script>
<script src="/js/modernizr.custom.71422.js"></script>
<script src="/js/learn.js"></script>
<script src="/js/hugo-learn.js"></script>


<link href="/mermaid/mermaid.css" type="text/css" rel="stylesheet"/>
<script src="/mermaid/mermaid.js"></script>
<script>mermaid.initialize({startOnLoad:true});</script>
    

  </body>
</html>

